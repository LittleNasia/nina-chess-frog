#pragma once
#include "board.h"

inline constexpr int max_moves = 256;

struct move_list_container
{
	move moves[max_moves];
	int num_moves;
#if use_nn
	bitboard pseudolegal_move_masks[COLOR_NONE][PIECE_NONE];
#endif
};

inline constexpr bitboard knight_moves[num_board_squares] =
{
	132096ULL,
	329728ULL,
	659712ULL,
	1319424ULL,
	2638848ULL,
	5277696ULL,
	10489856ULL,
	4202496ULL,
	33816580ULL,
	84410376ULL,
	168886289ULL,
	337772578ULL,
	675545156ULL,
	1351090312ULL,
	2685403152ULL,
	1075839008ULL,
	8657044482ULL,
	21609056261ULL,
	43234889994ULL,
	86469779988ULL,
	172939559976ULL,
	345879119952ULL,
	687463207072ULL,
	275414786112ULL,
	2216203387392ULL,
	5531918402816ULL,
	11068131838464ULL,
	22136263676928ULL,
	44272527353856ULL,
	88545054707712ULL,
	175990581010432ULL,
	70506185244672ULL,
	567348067172352ULL,
	1416171111120896ULL,
	2833441750646784ULL,
	5666883501293568ULL,
	11333767002587136ULL,
	22667534005174272ULL,
	45053588738670592ULL,
	18049583422636032ULL,
	145241105196122112ULL,
	362539804446949376ULL,
	725361088165576704ULL,
	1450722176331153408ULL,
	2901444352662306816ULL,
	5802888705324613632ULL,
	11533718717099671552ULL,
	4620693356194824192ULL,
	288234782788157440ULL,
	576469569871282176ULL,
	1224997833292120064ULL,
	2449995666584240128ULL,
	4899991333168480256ULL,
	9799982666336960512ULL,
	1152939783987658752ULL,
	2305878468463689728ULL,
	1128098930098176ULL,
	2257297371824128ULL,
	4796069720358912ULL,
	9592139440717824ULL,
	19184278881435648ULL,
	38368557762871296ULL,
	4679521487814656ULL,
	9077567998918656ULL,
};

inline constexpr bitboard king_moves[num_board_squares] =
{
	770,
	1797,
	3594,
	7188,
	14376,
	28752,
	57504,
	49216,
	197123,
	460039,
	920078,
	1840156,
	3680312,
	7360624,
	14721248,
	12599488,
	50463488,
	117769984,
	235539968,
	471079936,
	942159872,
	1884319744,
	3768639488,
	3225468928,
	12918652928,
	30149115904,
	60298231808,
	120596463616,
	241192927232,
	482385854464,
	964771708928,
	825720045568,
	3307175149568,
	7718173671424,
	15436347342848,
	30872694685696,
	61745389371392,
	123490778742784,
	246981557485568,
	211384331665408,
	846636838289408,
	1975852459884544,
	3951704919769088,
	7903409839538176,
	15806819679076352,
	31613639358152704,
	63227278716305408,
	54114388906344448,
	216739030602088448,
	505818229730443264,
	1011636459460886528,
	2023272918921773056,
	4046545837843546112,
	8093091675687092224,
	16186183351374184448,
	13853283560024178688,
	144959613005987840,
	362258295026614272,
	724516590053228544,
	1449033180106457088,
	2898066360212914176,
	5796132720425828352,
	11592265440851656704,
	4665729213955833856,
};

int generate_pseudolegal_moves(move_list_container& move_list, const board& b);

void generate_pseudolegal_moves_bitmasks(move_list_container& move_list, const board& b);

int generate_legal_moves(move_list_container& move_list, board& b);

bool square_is_attacked(int square, const board& b, const color c = COLOR_NONE);




